<!DOCTYPE html>
<html>
<head>
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<meta name="author" content="Krasimir Tsonev" />
	<meta name="copyright" content="Krasimir Tsonev" />
	<meta name="robots" content="follow,index" />
	<meta name="title" content="AbsurdJS - JavaScript based CSS/HTML preprocessor in less then 10Kb" />
	<meta name="keywords" content="AbsurdJS - JavaScript based CSS/HTML preprocessor" lang="en-us" />
	<meta name="description" content="AbsurdJS - JavaScript based CSS/HTML preprocessor" />
	<meta property="og:site_name" content="https://github.com/krasimir/absurd"/>
	<meta property="og:title" content="AbsurdJS - JavaScript based CSS/HTML preprocessor"/> 
	<meta property="og:description" content="AbsurdJS - JavaScript based CSS/HTML preprocessor"/>
	
	<title>AbsurdJS - the new CSS preprocessor</title>
	<link rel="stylesheet" href="./css/styles.css">
	<link rel="stylesheet" href="./css/prism.css">

</head>
<body>

	<!-- facebook -->
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=130923167067801";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));</script>

	<header>
		<h1>AbsurdJS</h1>
		<h2>JavaScript based CSS/HTML preprocessor</h2>
	</header>
	<div class="content">
		<div class="demo-selector"></div>
		<div class="demo">
			<div class="editor-wrapper">
				<div id="editor"></div>
			</div>
			<div class="result"><pre></pre></div>
			<br class="clear" />
		</div>
		<a href="javascript:void(0);" id="compile" class="compile">Compile<br /><small>Click me or press Ctrl+Enter</small></a>

		<section class="social">

			<!-- Twitter -->
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="KrasimirTsonev" data-hashtags="AbsurdJS">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

			<!-- GitHub -->
			<iframe src="http://ghbtns.com/github-btn.html?user=krasimir&repo=absurd&type=watch&count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>

  			<!-- Google plus -->
			<!-- Place this tag where you want the +1 button to render. -->
			<div class="g-plusone" data-size="medium" data-annotation="inline" data-width="120"></div>

			<!-- Place this tag after the last +1 button tag. -->
			<script>
			  (function() {
			    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			    po.src = 'https://apis.google.com/js/plusone.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			  })();
			</script>

			<!-- Facebook -->
  			<div class="fb-like" data-href="http://krasimir.github.io/absurd/" data-width="80" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="standard" data-action="like" data-show-faces="false" data-send="false"></div>

		</section>

		<div class="menu">
			<div class="menu-inner">
				<section>
					<p>
						<a href="#client-side-usage">Client-side usage</a>
						<a href="#client-side-tests"><small>Client-side tests</small></a>
					</p>
					<hr />
					<p>
						<a href="#server-side-usage">Server-side usage</a>
						<a href="#compilation"><small>Compilation</small></a>
						<a href="#input-formats"><small>Input formats</small></a>
						<a href="#syntax"><small>Syntax</small></a>
						<a href="#extending"><small>Extending</small></a>
						<a href="#metamorphosis-/-html"><small>Metamorphosis / HTML</small></a>
						<a href="#metamorphosis-/-components"><small>Metamorphosis / Components</small></a>
						<a href="#api"><small>API</small></a>
						<a href="#testing"><small>Testing</small></a>
					</p>
				</section>
				<section class="centered must-read">
					<img src="img/must-read.jpg" class="must-read" />
					<p>
						<a href="http://krasimirtsonev.com/blog/article/AbsurdJS-fundamentals" target="_blank"><small>&#9830;<br />AbsurdJS fundamentals<br />(an introduction to the library)</small></a>
						<a href="http://davidwalsh.name/write-css-javascript" target="_blank"><small>&#9830;<br />Write your CSS with JavaScript<br />(an AbsurdJS concept presentation)</small></a>
					</p>
				</section>
			</div>
		</div>

		<div class="documentation">
			<div class="documentation-inner">
				<h2><a href="#client-side-usage" name="client-side-usage">&#187;</a>Client-side usage</h2>

<section>
	<div class="desc">
		<p>
			Download the client-side version:<br />
			<a href="https://raw.github.com/krasimir/absurd/master/client-side/build/absurd.js" target="_blank">absurd.js</a><br />
			<a href="https://raw.github.com/krasimir/absurd/master/client-side/build/absurd.min.js" target="_blank">absurd.min.js</a><br /><br />
			After that simply include the file into your page.
		</p>
	</div>
	<div class="code">
		<pre><code class="language-markup">&lt;script src="absurd.min.js">&lt;/script></code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>Initialize Absurd and use the API.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">var api = Absurd();
api.add({
	body: {
		marginTop: "20px",
		p: {
			color: "#000"
		}
	}
});</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>Compile and get the CSS.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.compile(function(err, css) {
	// use the compiled css
});</code></pre>
	</div>
	<br class="clear">
</section>

<h3><a href="#client-side-tests" name="client-side-tests">&#187;</a>Client-side tests</h3>

<section>
	<div class="desc">
		<p>Just download the files from the repository and open <strong>/client-side/tests</strong> in your browser.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">/client-side/tests</code></pre>
	</div>
	<br class="clear">
</section>
<h2><a href="#server-side-usage" name="server-side-usage">&#187;</a>Server-side usage</h2>
<section>
	<div class="desc">
		<h4><a href="#installation" name="installation">&#187;</a>Installation</h4>
	</div>
	<div class="code"><pre><code class="language-javascript">npm install -g absurd</code></pre></div>
	<br class="clear">
</section>
<h3><a href="#compilation" name="compilation">&#187;</a>Compilation</h3>

<section>
	<div class="desc">
		<h4><a href="#inline-compilation" name="inline-compilation">&#187;</a>Inline compilation</h4>
		<p>Use this approach if you want to integrate AbsurdJS into your NodeJS app.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">var Absurd = require("absurd");
Absurd(function(api) {
    // use the Absurd's api here
}).compile(function(err, css) {
    // do something with the css
});</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#inline-compilation-to-a-file" name="inline-compilation-to-a-file">&#187;</a>Inline compilation to a file</h4>
		<p>Use this approach if you want to integrate AbsurdJS into your NodeJS app and save the result to a file.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">var output = "./css/styles.css";
Absurd("./css/styles.js").compileFile(output, function(err, css) {
    // ...
});</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#compiling-through-command-line-interface" name="compiling-through-command-line-interface">&#187;</a>Compiling through command line interface</h4>
	</div>
	<div class="code">
		<pre><code class="language-javascript">// Outputs the css in the console.
absurd -s [source file] 

// Outputs the css to a file.
absurd -s [source file] -o [output file]

// Outputs the css to a file and watching 
// specific directory. If some of the files 
// there is changed a compilation is fired.
absurd -s [source file] -o [output file] -w [directory]

// Minify the CSS
absurd -s [source file] -m true

// Preprocessing html
absurd -s [source file] -t html

// keep the camel case of the properties
absurd -s [source file] -k true</code></pre>

Here are two examples uses all the options:
<pre><code class="language-javascript"># as css parser
node ./index.js -s ./tests/data/css/index.js -o ./tests/data/result/res.css -w ./tests/data/**/*.js -m true

# as html parser 
node ./index.js -s ./tests/data/html.json -o ./tests/data/result/code.html -w ./tests/data/**/*.json -m true -t html</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#using-with-grunt" name="using-with-grunt">&#187;</a>Using with Grunt</h4>
		<a href="https://github.com/krasimir/grunt-absurd">grunt-absurd - the official Grunt plugin of AbsurdJS</a>
	</div>
	<div class="code">
		<p>Dependencies for your package.json:</p>
		<pre><code class="language-javascript">"dependencies": {
    "grunt": "~0.4.1",
    "grunt-contrib-watch": "*",
    "grunt-absurd": "*"
}</code></pre>
	<p>Simple Gruntfile.js:</p>
	<pre><code class="language-javascript">module.exports = function(grunt) {

    grunt.initConfig({
        absurd: {
            task: {
                src: __dirname + "/css/absurd/index.js",
                dest: 'css/styles.css'
            }
        },
        watch: {
            css: {
                files: ['css/absurd/**/*.js'],
                tasks: ['absurd']
            }
        }
    });

    grunt.loadNpmTasks('grunt-contrib-watch');
    grunt.loadNpmTasks('grunt-absurd');

    // grunt.registerTask('default', ['concat', 'less']);
    grunt.registerTask('default', ['absurd', 'watch']);

}</code></pre>
	</div>
	<br class="clear">
</section>



<h3><a href="#input-formats" name="input-formats">&#187;</a>Input formats</h3>

<section>
	<div class="desc">
		<h4><a href="#javascript" name="javascript">&#187;</a>JavaScript</h4>
		<p>Just create a .js file like for example /css/styles.js. The file should contain the usual nodejs module code.</p>
	</div>
	<div class="code"><pre><code class="language-javascript">module.exports = function(api) {
    // use the Absurd's api here
}</code></pre></div>
	<br class="clear">
</section>



<section>
	<div class="desc">
		<h4><a href="#json" name="json">&#187;</a>JSON</h4>
		<p>The library supports importing of pure JSON. Of course this approach doesn't give you an access to the API, but it is still useful if you want to skip the typical Nodejs module definition.</p>
	</div>
	<div class="code"><pre><code class="language-javascript">// styles.json
{
    "body": {
        "margin": "0",
        "padding": "0",
        "fontSize": "1em",
        "p": {
            "line-height": "30px"
        }
    }
}

// app.js
Absurd("styles.json").compile(function(err, css) {
    // ...
});</code></pre></div>
	<br class="clear">
</section>



<section>
	<div class="desc">
		<h4><a href="#css" name="css">&#187;</a>CSS</h4>
		<p>Absurd accepts normal CSS. The good news is that you can still use all the other features.</p>
	</div>
	<div class="code"><pre><code class="language-javascript">// styles.js
api.plugin("size", function(api, type) {
    switch(type) {
        case "large": return { fontSize: "30px" }; break;
        case "medium": return { fontSize: "24px" }; break;
        case "small": return { fontSize: "12px" }; break;
        default: return { fontSize: "16px" };
    }
});
api.import(__dirname + "/css/main.css");

// main.css
body {
    margin-top: 10px;
    size: small;
}</code></pre>
	<p>And the result is:</p>
	<pre><code class="language-css">body {
    margin-top: 10px;
    font-size: 12px;
}</code></pre>
	</div>
	<br class="clear">
</section>


<section>
	<div class="desc">
		<h4><a href="#yaml" name="yaml">&#187;</a>YAML</h4>
		<p>The library supports import of YAML files</p>
	</div>
	<div class="code"><pre><code class="language-javascript">// styles.yaml
---
body:
  margin: 0
  padding: 0
  fontSize: 1em
  p:
    line-height: 30px

// app.js
Absurd("styles.yaml").compile(function(err, css) {
    // ...
});</code></pre></div>
	<br class="clear">
</section>
<h3><a href="#syntax" name="syntax">&#187;</a>Syntax</h3>

<section>
	<div class="desc">
		<p>In the context of JavaScript the closest thing to pure CSS syntax is JSON format. So, every valid JSON is actually valid Absurd syntax. As you can see above, there are two ways to send styles to the module. In both cases you have an access to the Absurd's API.</p>
	</div>
	<div class="code"><pre><code class="language-javascript">Absurd(function(api) {
    api.add({});
});</code></pre>
	<p>or in an external js file</p>
	<pre><code class="language-javascript">module.exports = function(api) {
    api.add({});
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>The add method accepts valid JSON. This could be something like</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">{
    body: {
        marginTop: '20px',
        padding: 0,
        fontWeight: 'bold',
        section: {
            paddingTop: '20px'
        }
    }
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>Every object defines a selector. Every property of that object could be a property and its value or another object. For example the JSON above is compiled to:</p>
	</div>
	<div class="code">
		<pre><code class="language-css">body {
    margin-top: 20px;
    padding: 0;
    font-weight: bold;
}
body section {
    padding-top: 20px;
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>Have in mind that you don't need to quote the CSS properties. AbsurdJS converts every uppercase letter to a dash followed by the lowercase version of the letter. I.e.:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">WebkitTransform -> -webkit-transform</code></pre>
		<p>You may send even an array of style like that</p>
		<pre><code class="language-javascript">{
    '.header nav': [
        { fontSize: '10px' },
        { fontSize: '20px' }
    ]
}</code></pre>
		<p>And that's compiled to</p>
		<pre><code class="language-css">.header nav {
    font-size: 20px;
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#pseudo-classes" name="pseudo-classes">&#187;</a>Pseudo classes</h4>
		<p>It's similar like the example above:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">a: {
    textDecoration: 'none',
    color: '#000',
    ':hover': {
        textDecoration: 'underline',
        color: '#999'
    },
    ':before': {
        content: '"> "'
    }
}</code></pre>
		<p>Is compiled to:</p>
		<pre><code class="language-css">a {
    text-decoration: none;
    color: #000;
}
a:hover {
    text-decoration: underline;
    color: #999;
}
a:before {
    content: "> ";
}</code></pre>
	</div>
	<br class="clear">
</section>

<a name="syntax.ampersand"></a>
<section>
    <div class="desc">
        <h4>Using ampersand (<strong>&amp;</strong>) operator</h4>
        <p>It has the same meaning like in LESS.</p>
    </div>
    <div class="code">
        <pre><code class="language-javascript">a: {
    color: '#000',
    '&.sky': {
        color: "blue"
    }
}</code></pre>
        <p>Is compiled to:</p>
        <pre><code class="language-css">a {
  color: #000;
}
a.sky {
  color: blue;
}</code></pre>
    </div>
    <br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#importing" name="importing">&#187;</a>Importing</h4>
		<p>Of course you can't put everything in a single file. That's why there is .import method:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(api) {
    api.import(__dirname + '/config/colors.js');
    api.import(__dirname + '/config/sizes.js');
    api.import([
        __dirname + '/layout/grid.json'
    ]);
    api.import([
        __dirname + '/forms/login-form.css',
        __dirname + '/forms/feedback-form.css'
    ]);
}</code></pre>
		<p>Pay attention to the type of the files. The first two are actually JavaScript files, because they need an access to the API (to define mixins, plugins etc ...). The second import statement adds the actual styling. Of course it is not necessary to use this approach, but writing pure JSON sometimes may be a better option.</p>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#using-variables" name="using-variables">&#187;</a>Using variables</h4>
		<p>There is no need to use something special. Because that's pure javascript you may write:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">var brandColor = "#00F";
Absurd(function(api) {
    api.add({
        '.header nav': {
            color: brandColor
        }
    })
})</code></pre>
		<p>However, if you want to share variables between the files you may use the API's method storage. Let's say that you have two files /css/A.js and /css/B.js and you want to share values between them.</p>
		<pre><code class="language-javascript">// A.js
module.exports = function(api) {
    api.storage("brandColor", "#00F");
}

// B.js
module.exports = function(api) {
    api.add({
        body: {
            color: api.storage("brandColor")
        }
    })
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#mixins" name="mixins">&#187;</a>Mixins</h4>
		<p>In the context of Absurd mixins are actually normal javascript functions. The ability to put things inside the Absurd's storage gives you also the power to share mixins between the files. For example:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">// A.js
module.exports = function(api) {
    api.storage("button", function(color, thickness) {
        return {
            color: color,
            display: "inline-block",
            padding: "10px 20px",
            border: "solid " + thickness + "px " + color,
            fontSize: "10px"
        }
    });
}

// B.js
module.exports = function(api) {
    api.add({
        '.header-button': [
            api.storage("button")("#AAA", 10),
            {
                color: '#F00',
                fontSize: '13px'
            }
        ]
    });
}</code></pre>
		<p>What you do is to send array of two objects to the selector '.header-button'. The above code is compiled to:</p>
		<pre><code class="language-css">.header-button {
    color: #F00;
    display: inline-block;
    padding: 10px 20px;
    border: solid 10px #AAA;
    font-size: 13px;
}</code></pre>
		<p>Notice that the second object overwrites few styles passed via the mixin.</p>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4>Plugins (i.e. define your own CSS properties)</h4>
		<p>The plugins are similar like mixins, but act as property-value pair. There is an API method for registering plugins. </p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.plugin('my-custom-gradient', function(api, colors) {
    return {
        background: 'linear-gradient(to bottom, ' + colors.join(", ") + ')'
    };
});
api.plugin('brand-font-size', function(api, type) {
    switch(type) {
        case "small": return { fontSize: '12px'}; break;
        case "medium": return { fontSize: '22px'}; break;
        case "big": return { fontSize: '32px'}; break;
        default: return { fontSize: '12px'}; break;
    }
});</code></pre>
		<p>The code creates two plugins, which respond on my-custom-gradient and brand-font-size property. So, the following styles</p>
		<pre><code class="language-javascript">api.add({
    body: {
        margin: '20px',
        fontSize: '14px',
        'my-custom-gradient': ['#F00', '#00F'],
        p: {
            'brand-font-size': 'big'    
        }                   
    }
});</code></pre>
		<p>are compiled to:</p>
		<pre><code class="language-css">body {
    margin: 20px;
    font-size: 14px;
    background: linear-gradient(to bottom, #F00, #00F);
}
body p {
    font-size: 32px;
}</code></pre>
		<p>Have in mind, that the plugin should always return an object.</p>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#media-queries" name="media-queries">&#187;</a>Media queries</h4>
	</div>
	<div class="code">
		<p>The following code</p>
		<pre><code class="language-javascript">api.add({
    body: {
        lineHeight: '20px',
        '@media all (max-width: 950px)': {
            lineHeight: '40px',
            color: '#BADA55'
        },
        '@media all (min-width: 550px)': {
            lineHeight: '32px'  
        },
        p: {
            margin: '10px',
            padding: '4px',
            '@media all (max-width: 950px)': {
                padding: '12px',
                'brand-color': ''
            }
        }
    }
});</code></pre>
		<p>is compiled to</p>
		<pre><code class="language-css">body {
    line-height: 20px;
}
body p {
    margin: 10px;
    padding: 4px;
}
@media all (max-width: 950px) {
    body {
        line-height: 40px;
        color: #BADA55;
    }
    body p {
        color: #9fA;
        padding: 12px;
    }
}
@media all (min-width: 550px) {
    body {
        line-height: 32px;
    }
}</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<h4><a href="#sending-raw-data-to-the-final-compiled-css" name="sending-raw-data-to-the-final-compiled-css">&#187;</a>Sending raw data to the final compiled CSS</h4>
		<p>AbsurdJS gives you ability to directly send content to the final CSS. I.e. something which is skipped by the compiler and it is directly concatenated with the processed data.</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api
.add({
    body: {
        marginTop: "20px",
        p: {
            fontSize: "5px"
        }
    }
})
.raw('/* ' + comment + ' */')
.add({
    a: {
        paddingTop: "20px"
    }
});</code></pre>
		<p>The code above is compiled to</p>
		<pre><code class="language-css">body {
  margin-top: 20px;
}
body p {
  font-size: 5px;
}
/* AbsurdJS is awesome! */
a {
  padding-top: 20px;
}</code></pre>
	</div>
	<br class="clear">
</section>
<h2><a href="#extending" name="extending">&#187;</a>Extending</h2>

<section>
	<div class="desc">
		<p>
			You may create your own CSS properties by using the <em>plugins</em> feature.
		</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.plugin("hoverEffect", function(api, color) {
	return {
		":hover": {
			color: color,
            background: api.lighten(color, 60)
		}
	}
})
api.add({
	a: {
		color: "#000",
		hoverEffect: "#999"
	}
});</code></pre>
	</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>
			You could create your own API methods.
		</p>
	</div>
	<div class="code"><pre><code class="language-javascript">api.register("buttonize", function(selector) {
	var styles = {};
	styles[selector] = {
		cursor: "pointer",
		display: "block",
		background: "#aaa",
		":hover": {
			background: "#ddd"
		}
	};
	api.add(styles);
});
api.buttonize(".header a");</code></pre>The code above produces:<pre><code class="language-javascript">.header a {
  cursor: pointer;
  display: block;
  background: #aaa;
}
.header a:hover {
  background: #ddd;
}</code></pre>
</div>
	<br class="clear">
</section>

<section>
	<div class="desc">
		<p>
			Every API method could be overwritten. You are able to run your own function instead of the original one. If your method returns <em>true</em> then the default behaviour of the method is suppressed and only your implementation works.
		</p>
	</div>
	<div class="code"><pre><code class="language-javascript">api.hook("add", function(rules) {	
	if(rules.grid) {
		var styles = {};
		styles[rules.grid.parent] = parentStyles = {
			":after": {
				display: "table",
				content: "",
				clear: "both"
			}
		};
		parentStyles[rules.grid.child] = {
			width: (100 / rules.grid.columns) + "%",
			float: "left"
		};
		api.add(styles);
		return true;
	}
});
api.add({
	grid: {
		parent: ".header .menu",
		child: ".link",
		columns: 4
	}
});</code></pre>
		<p>And the result is:</p><pre><code class="language-javascript">.header .menu:after {
  display: table;
  content: "";
  clear: both;
}
.header .menu .link {
  width: 25%;
  float: left;
}</code></pre>
</div>
	<br class="clear">
</section>
<h2><a href="#metamorphosis-/-html" name="metamorphosis-/-html">&#187;</a>Metamorphosis / HTML</h2>

<!-- ----------------------- -->
<section>
	<div class="desc">
		<p>
			AbsurdJS was made really flexible. It is so flexible that you can use it as HTML preprocessor. I.e. you may write JavaScript, JSON or YAML and receive HTML at the end.
		</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.morph("html");
api.add({
	html: {
	    head: {
	    	title: "title"
	    },
	    body: {}
	}
}).compile(function(err, html) {
	// use the html here
});</code></pre>
The result of the above compilation is:
<pre><code class="language-markup">&lt;html>
	&lt;head>
		&lt;title>
			title
		&lt;/title>
	&lt;/head>
	&lt;body/>
&lt;/html></code></pre>
	</div>
	<br class="clear">
</section>

<!-- ----------------------- -->
<section>
	<div class="desc">
		<p>
			There are three special properties that you may set:<br />
		</p>
	</div>
	<div class="code">

		<em>_</em> (underscore) is interpreted  as node value.
		<pre><code class="language-javascript">body: {
	_: "page text"
}</code></pre>
Will be compiled to:
<pre><code class="language-markup">&lt;body>page text&lt;/body></pre></code>

<em>_attrs</em> accepts an object, which is used to define node attributes.
<pre><code class="language-javascript">body: {
	_attrs: { class: "black" }
}</code></pre>
The result is:
<pre><code class="language-markup">&lt;body class="black"/></pre></code>

<em>_tpl</em> is used when you have a template defined. During the usage of <em>add</em> method you may pass a template name. For example:
<pre><code class="language-javascript">api.add({
	title: "AbsurdJS preprocessor"
}, "title");

api.add({
	html: {
		head: {
			_tpl: "title"
		}
	}
})</code></pre>The above code is compiled to:
<pre><code class="language-markup">&lt;html>
	&lt;head>
		&lt;title>
			AbsurdJS preprocessor
		&lt;/title>
	&lt;/head>
&lt;/html>
</pre></code>

<em>_include</em> accepts an object or array of objects. It acts as templates. Just compiles the included objects.
<pre><code class="language-javascript">var paragraph = { p: "Paragraph text." };
var footer = { footer: "Footer text." };
var body = {
	_include: [
		{ h1: "Title here" },
		paragraph, 
		footer
	]
}
api.morph("html");
api.add({
	html: {
		_include: body
	}
});</code></pre>The result is:
<pre><code class="language-markup">&lt;html>
	&lt;h1>
		Title here
	&lt;/h1>
	&lt;p>
		Paragraph text.
	&lt;/p>
	&lt;footer>
		Footer text.
	&lt;/footer>
&lt;/html></pre></code>

	</div>
	<br class="clear">
</section>

<!-- ----------------------- -->
<section>
	<div class="desc">
		<p>
			If you want to speed up your writing you will be glad to see that Absurd supports <a href="http://docs.emmet.io/abbreviations/">Emmet</a> like syntax.
		</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.morph("html");
api.add({
	html: {
		head: {
			title: "AbsurdJS is awesome"
		},
		body: {
			'.content.left#wrapper': {
				'a[href="http://krasimir.github.io/absurd/"]': "AbsurdJS documentation",
				'p.text[title="description" data-type="selectable"]': "CSS preprocessor"
			}
		}
	}
});</pre></code>
The code produces:
<pre><code class="language-markup">&lt;html>
	&lt;head>
		&lt;title>
			AbsurdJS is awesome
		&lt;/title>
	&lt;/head>
	&lt;body>
		&lt;div class="content left" id="wrapper">
			&lt;a href="http://krasimir.github.io/absurd/">
				AbsurdJS documentation
			&lt;/a>
			&lt;p class="text" title="description" data-type="selectable">
				CSS preprocessor
			&lt;/p>
		&lt;/div>
	&lt;/body>
&lt;/html></code></pre>
	</div>
	<br class="clear">
</section>
<h3><a href="#api" name="api">&#187;</a>API</h3>

<a name="api.add"></a>
<section>
	<div class="desc">
		<h4><a href="#add" name="add">&#187;</a>.add</h4>
		<p>Parameters:<br />
			[object]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(api) {
    api.add({
        body: { 
            padding: 0 
        }
    });
}</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.import"></a>
<section>
	<div class="desc">
		<h4><a href="#import" name="import">&#187;</a>.import</h4>
		<p>Parameters:<br />
			[string] | [[string, string, ...]]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(A) {
    A.import(__dirname + '/config/sizes.js');
    A.import([
        __dirname + '/config/colors.js',
        __dirname + '/config/sizes.js'
    ]);
}</code></pre>
		<p>AbsurdJS supports importing of JavaScript, JSON and CSS files.</p>
	</div>
	<br class="clear">
</section>

<a name="api.storage"></a>
<section>
	<div class="desc">
		<h4><a href="#storage" name="storage">&#187;</a>.storage</h4>
		<p>Parameters:<br />
			[key], [value]</p>
	</div>
	<div class="code">
		<p>Setting value:</p>
		<pre><code class="language-javascript">module.exports = function(api) {
    api.storage("mixin", function(px) { 
        return {
            fontSize: px + 'px'
        }
    });
}</code></pre>
		<p>Getting value:</p>
		<pre><code class="language-javascript">module.exports = function(api) {
    api.add({
        body: [
            api.storage("mixin")(18)
        ]
    });
}  </code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.plugin"></a>
<section>
	<div class="desc">
		<h4><a href="#plugin" name="plugin">&#187;</a>.plugin</h4>
		<p>Parameters:<br />
			[name of property], [function]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.plugin('my-custom-gradient', function(api, colors) {
    return {
        background: 'linear-gradient(to bottom, ' + colors.join(", ") + ')'
    };
});</code></pre>
		<p>The function of the plugin accepts two arguments. The first one is a reference to the API and second one is the value of the CSS property.</p>
	</div>
	<br class="clear">
</section>

<a name="api.darken"></a>
<section>
	<div class="desc">
		<h4><a href="#darken" name="darken">&#187;</a>.darken</h4>
		<p>Parameters:<br />
			[color], [percents]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(api) {
    api.add({
        body: {
            color: api.darken('#BADA55', 25) // darken 25%
        }
    });
}</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.lighten"></a>
<section>
	<div class="desc">
		<h4><a href="#lighten" name="lighten">&#187;</a>.lighten</h4>
		<p>Parameters:<br />
			[color], [percents]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(api) {
    api.add({
        body: {
            color: api.lighten('#BADA55', 25) // lighten 25%
        }
    });
}</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.raw"></a>
<section>
	<div class="desc">
		<h4><a href="#raw" name="raw">&#187;</a>.raw</h4>
		<p>Parameters:<br />
			[string]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">module.exports = function(api) {
    api.raw('/* comment here */');
}</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.compile"></a>
<section>
	<div class="desc">
		<h4><a href="#compile" name="compile">&#187;</a>.compile</h4>
		<p>Parameters:<br />
			[function], [options]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.compile(function(err, css) {
	// use the compiled css
}, {});
		</code></pre>
		<p>The <em>options</em> parameter is optional. It's default value is:</p>
	<pre><code class="language-javascript">{
	combineSelectors: true,
	minify: false,
	processor: [internal CSS preprocessor],
	keepCamelCase: false
}
		</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.compileFile"></a>
<section>
	<div class="desc">
		<h4><a href="#compilefile" name="compilefile">&#187;</a>.compileFile</h4>
		<p>Parameters:<br />
			[path], [function], [options]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.compileFile("css/styles.css", function(err, css) {
    // use the compiled css
}, {});
		</code></pre>
		<p>Check <em>.compile</em> method for more information regarding <em>options</em> parameter.</p>
	</div>
	<br class="clear">
</section>

<a name="api.hook"></a>
<section>
	<div class="desc">
		<h4><a href="#hook" name="hook">&#187;</a>.hook</h4>
		<p>Parameters:<br />
			[method], [function]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.hook("add", function(rules, stylesheet) {
	// write your logic here
	return true;
});
		</code></pre>
		<p>If your hook handler returns <em>true</em> the default method behaviour is skipped.</p>
	</div>
	<br class="clear">
</section>

<a name="api.register"></a>
<section>
	<div class="desc">
		<h4><a href="#register" name="register">&#187;</a>.register</h4>
		<p>Parameters:<br />
			[method], [function]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.register("toJSON", function(callback) {
	// your custom code here
})
		</code></pre>
	</div>
	<br class="clear">
</section>

<a name="api.morph"></a>
<section>
	<div class="desc">
		<h4><a href="#morph" name="morph">&#187;</a>.morph</h4>
		<p>Parameters:<br />
			[type]</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">api.morph("html");</code></pre>
		<pre><code class="language-javascript">api.morph("component");</code></pre>
	</div>
	<br class="clear">
</section>
<h3><a href="#testing" name="testing">&#187;</a>Testing</h3>

<section>
	<div class="desc">
		<p>The tests are placed in /tests directory. Install jasmine-node and run:</p>
	</div>
	<div class="code">
		<pre><code class="language-javascript">jasmine ./tests</code></pre>
	</div>
	<br class="clear">
</section>
			</div>
		</div>

	</div>

	<a href="https://github.com/krasimir/absurd"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>

	<!-- <script src="./js/absurd.min.js"></script>-->
	<script src="./js/absurd.js"></script>
	<script src="./js/jquery-1.10.2.min.js"></script>
	<script src="./js/ace/src-noconflict/ace.js"></script>
	<script src="./js/prism.js"></script>
	<script src="./js/demos.js"></script>

	<script>
		$(document).ready(function() {

			var getParameterByName = function(name) {
				name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
				var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				    results = regex.exec(location.search);
				return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}

			var shortenURL = function(url, callback) {
				var bitlyToken = "32ce8abb603b17721ba37a343a357c4c7394813f";
				var bitlyURL = "https://api-ssl.bitly.com/v3/shorten?access_token=" + bitlyToken + "&longUrl=" + encodeURIComponent(url);
				var jqxhr = $.getJSON(bitlyURL, function(data) {
					if(data && data.status_code === "200" && data.data.url) {
						callback(null, data.data.url);
					}
				})
				.fail(function() {
					callback({error: "Can't shorten url"}, url);
				});
			}
			// shortenURL("http://krasimir.github.io/absurd");

			var compile = function() {
				var api = Absurd();
				var code = editor.getSession().getValue();
				try {
					eval(code);
					api.compile(function(err, res, res2) {
						res = res.replace(/\</g, '&lt;');
						if(res2) {
							res2 = res2.replace(/</g, '&lt;');
							res = '---- CSS ----\n' + res;
						}
						result.html(res + (res2 ? '\n---- HTML ----\n' + res2 : ''));
					});
				} catch(err) {
					result.html((err.stack ? err.stack : err.toString()));
				}
			}

			var editor = ace.edit("editor");
		    editor.setTheme("ace/theme/tomorrow");
		    editor.renderer.setShowGutter(true); 
		    editor.renderer.setShowPrintMargin(false); 
		    editor.setFontSize("18px");
		    editor.getSession().setMode("ace/mode/javascript");

		    var compileButton = $("#compile");
		    compileButton.on("click", compile);

		    var result = $(".result pre");

		    // compile on Ctrl+Enter
		    var isCtrl = false;
			$(document).keyup(function(e) {
				if(e.which == 17) {
					isCtrl = false;
				}
			});
			$(document).keydown(function(e) {
				if(e.which == 17) {
					isCtrl = true; 
				}
				if(e.which == 13 && isCtrl) { 
					compile();
				} 
			});

			// demo selector
			var defaultDemo = getParameterByName("demo");
			defaultDemo = defaultDemo != '' ? parseInt(defaultDemo)-1 : 0;
			var demoSelectMarkup = '<select id="demo-selector-control">';
		    for(var i=0; i<demos.length; i++) {
		    	var demo = demos[i];
		    	var selected = '';
		    	if(i === defaultDemo) {
		    		editor.getSession().setValue(demo.content);
		    		selected = ' selected="selected"'
		    	}
		    	demoSelectMarkup += '<option value="' + i + '"' + selected + '>' + demo.name + '</option>';
		    }
		    demoSelectMarkup += '</select>';
		    var demoSelect = $(demoSelectMarkup);
		    $(".demo-selector").append(demoSelect);
		    demoSelect.on("change", function() {
				editor.getSession().setValue(demos[parseInt(demoSelect.val())].content);
				compile();
				demoSelect.blur();
		    });

		    compile();

		});
	</script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-1621908-2', 'krasimir.github.io');
	  ga('send', 'pageview');

	</script>

</body>
</html>